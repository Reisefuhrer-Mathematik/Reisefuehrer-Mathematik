\documentclass[../../main.tex]{subfiles}

\begin{document}
Nachdem du im letzten Abschnitt gelernt hast, was ein Integral ist und was du dir darunter vorstellen kannst,
entwickeln wir in diesem Abschnitt eine Möglichkeit, Integrale näherungsweise zu bestimmen -- auch dann, wenn sich
die Fläche nicht direkt ausrechnen lässt.

\parpic[r]{
    \begin{tikzpicture}
        \begin{axis}[
            defgrid, y=1cm, x=1cm, ymin=0, ymax=4, xmin=0, xmax=4, xtick={1,...,4}, ytick={1,...,4}
            ]
            \addplot[name path=poly, domain=0:4, violet] {0.2*x^2+1};
            \addplot[name path=line, domain=0:4, violet] {0};
            \addplot[fill opacity=0.5, fill=violet!20] fill between[ 
            of = poly and line,
            soft clip={domain=1:4},
            ];
        \end{axis}
    \end{tikzpicture}
}
Als Beispiel schauen wir uns die Funktion $f(x)=\frac{1}{5}x^2+1$ an, die rechts dargestellt ist. Das Integral
\[\int_1^4\frac{1}{5}x^2+1\diff x,\]
das rechts eingezeichnet ist, können wir nicht mit uns bekannten Flächenformeln ausrechnen. Im Kapitel über 
Differentialrechnung hatten wir ein ähnliches Problem, als wir die Steigung einer Funktion bestimmen wollten. Wir haben
uns dann überlegt, wie wir die Steigung annähern können (schaue dir nochmal die Differenzenquotienten an, die wir dort
verwendet haben, wenn du dich nicht mehr erinnerst). Mit Integralen müssen wir das ähnlich machen. Wir müssen die
Fläche also irgendwie durch Flächen annähern, die wir gut berechnen können. Am besten bieten sich dafür Rechtecke an,
weil ihr Flächeninhalt sehr einfach zu berechnen ist. Wie können wir die eingezeichnete Fläche also durch Rechtecke 
annähern? Versuchen wir es mal so:

\begin{figure}[h!]
    \centering
    \begin{multicols}{3}
        \begin{tikzpicture}
            \begin{axis}[
            defgrid, y=0.85cm, x=0.85cm, ymin=0, ymax=4, xmin=0, xmax=4, xtick={1,...,4}, ytick={1,...,4}
            ]
                \addplot[name path=poly, domain=0:4, violet] {0.2*x^2+1};
                \pgfplotsinvokeforeach {1,2,3}{
                    \filldraw[draw=violet,fill=violet!20, opacity=0.5] (#1,0) -- (#1,0.2*#1*#1+1) -- (#1 + 1, 0.2*#1*#1+1) -- (#1 + 1, 0) -- cycle;
                }
            \end{axis}
        \end{tikzpicture}

        \begin{tikzpicture}
            \begin{axis}[
            defgrid, y=0.85cm, x=0.85cm, ymin=0, ymax=4, xmin=0, xmax=4, xtick={1,...,4}, ytick={1,...,4}
            ]
                \addplot[name path=poly, domain=0:4, violet] {0.2*x^2+1};
                \pgfplotsinvokeforeach {1,1.5,2,2.5,3,3.5}{
                    \filldraw[draw=violet,fill=violet!20, opacity=0.5] (#1,0) -- (#1,0.2*#1*#1+1) -- (#1 + 0.5, 0.2*#1*#1+1) -- (#1 + 0.5, 0) -- cycle;
                }
            \end{axis}
        \end{tikzpicture}

        \begin{tikzpicture}
            \begin{axis}[
            defgrid, y=0.85cm, x=0.85cm, ymin=0, ymax=4, xmin=0, xmax=4, xtick={1,...,4}, ytick={1,...,4}
            ]
                \addplot[name path=poly, domain=0:4, violet] {0.2*x^2+1};
                \pgfplotsinvokeforeach {1,1.25,...,3.75}{
                    \filldraw[draw=violet,fill=violet!20, opacity=0.5] (#1,0) -- (#1,0.2*#1*#1+1) -- (#1 + 0.25, 0.2*#1*#1+1) -- (#1 + 0.25, 0) -- cycle;
                }
            \end{axis}
        \end{tikzpicture}
    \end{multicols}
\end{figure}

Wir versuchen also, die Fläche durch Rechtecke darzustellen, indem wir eine Breite für die Rechtecke festlegen und jedes 
Rechteck so hoch zeichnen, dass der linke Teil den Funktionsgraphen berührt. Damit das Rechteck links den Funktionsgraphen
berührt, hat es die Höhe $f(1)$. Insgesamt ergibt sich für die Rechteckfläche im linken Bild der Flächeninhalt
\begin{align*}
    A_R&=\colorbrace{f(1)\cdot 1}{\text{1. Rechteck}}+\colorbrace{f(2)\cdot 1}{\text{2. Rechteck}}+\colorbrace{f(3)\cdot 1}{\text{3. Rechteck}}\\
    &=\colorbrace{\frac{1}{5}+1}{\text{1. Rechteck}}~+~\colorbrace{\frac{4}{5}+1}{\text{2. Rechteck}}~+~\colorbrace{\frac{9}{5}+1}{\text{3. Rechteck}}\\
    &=\frac{14}{5}+3=\frac{29}{5}.
\end{align*}
Die Annäherung $\frac{29}{5}$ für das Integral ist natürlich nicht besonders gut, da die weiß gebliebenen Flächen nicht 
mitberechnet wurden. Ähnlich wie auch schon bei der Berechnung von Ableitungen können wir dieses Problem vermindern,
indem wir schmalere Rechtecke wählen. Du siehst, dass die weiß gebliebenen Flächen im rechten Bild am kleinsten sind.

Wenn wir ein Integral berechnen wollen, können wir also ein besseres Ergebnis erzielen, je schmaler die Rechtecke sind,
die wir verwenden -- oder, was auf das gleiche hinausläuft, die Anzahl der Rechtecke erhöhen. Links haben wir 3 Rechtecke
verwendet, in der Mitte 6 und rechts sogar 12 Rechtecke.

\parpic[r]{
    \begin{tikzpicture}
        \begin{axis}[
        defgrid, y=0.9cm, x=0.9cm, ymin=-0.5, ymax=4.2, xmin=0, xmax=4, xtick={1,4}, xticklabels={$a$,$b$}, ytick={1,...,4}
        ]
            \addplot[name path=poly, domain=0:4, violet] {0.2*x^2+1};
            \pgfplotsinvokeforeach {1,2,3}{
                \filldraw[draw=violet,fill=violet!20, opacity=0.5] (#1,0) -- (#1,0.2*#1*#1+1) -- (#1 + 1, 0.2*#1*#1+1) -- (#1 + 1, 0) -- cycle;
            }
            \draw[latex-latex,very thick] (1,3.9) -- node[above] {$n$ Rechtecke} (4,3.9);
            \draw[latex-latex] (2,-0.1) -- node[below] {\small $\frac{b-a}{n}$} (3,-0.1);
        \end{axis}
    \end{tikzpicture}
}
Unserer linken Integralgrenze geben wir einmal allgemein den Namen $a$ und der rechten Grenze den Namen $b$. Wenn wir
das Integral nun in $n$ Rechtecke aufteilen, dann sieht die Aufteilung so aus wie rechts. Das gesamte Integral hat eine
Breite von $b-a$ (im Beispiel etwa $4-1=3$). Wenn wir dies nun in 3 Rechtecke aufteilen wollen, bleibt für jedes Rechteck
eine Breite von $\frac{b-a}{3}$ übrig -- mit $b-a=3$ also $\frac{3}{3}=1$.

Teilen wir das Integral allgemein in $n$ Rechtecke auf, so erhalten wir für jedes Rechteck eine Breite von
\[\text{Breite der Rechtecke}=\frac{b-a}{n}.\]
Das erste Rechteck fängt links bei $x=a$ an. Das zweite Rechteck liegt $\frac{b-a}{n}$ Einheiten weiter rechts. Das
heißt, dass es bei $x=a+\frac{b-a}{n}$ anfängt. Die Rechtecke haben also die Höhen
\[f(a), f\Bigl(a+\frac{b-a}{n}\Bigr), f\Bigl(a+2\frac{b-a}{n}\Bigr),\dots,f\Bigl(a+(n-1)\frac{b-a}{n}\Bigr).\]
\begin{example}{}
    Wenn wir das Integral
    \[\int_1^4\frac{1}{5}x^2+1\diff x\]
    in 3 Rechtecke aufteilen, erhalten wir Rechtecke der Breite $\frac{b-a}{n}=\frac{4-1}{3}=1$. Dabei haben die
    Rechtecke die folgenden Höhen:
    \begin{itemize}
        \item \textbf{Rechteck 1} hat die Höhe $f(a)=f(1)$
        \item \textbf{Rechteck 2} hat die Höhe $f(a+\frac{b-a}{n})=f(1+1)=f(2)$
        \item \textbf{Rechteck 3} hat die Höhe $f(a+2\cdot\frac{b-a}{n})=f(1+2\cdot 1)=f(3)$
    \end{itemize}
\end{example}

Damit können wir (theoretisch) die Rechtecksumme ausrechnen:
\begin{align*}
    &\colorbrace{\colorbrace{\frac{b-a}{n}}{\text{Breite}}\cdot \colorbrace{f(a)}{\text{Höhe}}}{\text{1. Rechteck}}+
    \colorbrace{\colorbrace{\frac{b-a}{n}}{\text{Breite}}\cdot \colorbrace{f(a+\frac{b-a}{n})}{\text{Höhe}}}{\text{2. Rechteck}}+
    \dots+
    \colorbrace{\colorbrace{\frac{b-a}{n}}{\text{Breite}}\cdot \colorbrace{f(a+(n-1)\frac{b-a}{n})}{\text{Höhe}}}{n\text{-tes Rechteck}}\\
    =&\frac{b-a}{n}\cdot \biggl(f(a)+f\Bigl(a+\frac{b-a}{n}\Bigr)+f\Bigl(a+2\frac{b-a}{n}\Bigr)+\dots+f\Bigl(a+(n-1)\frac{b-a}{n}\Bigr)\biggr)
\end{align*}
Hier haben wir im letzten Schritt den Term $\frac{b-a}{n}$ ausgeklammert. Wenn wir $n$ möglichst groß wählen, entspricht diese Summe immer 
besser dem wirklichen Integral, sodass wir mit
\[\lim_{n\rightarrow\infty}\frac{b-a}{n}\cdot \biggl(f(a)+f\Bigl(a+\frac{b-a}{n}\Bigr)+f\Bigl(a+2\frac{b-a}{n}\Bigr)+\dots+f\Bigl(a+(n-1)\frac{b-a}{n}\Bigr)\biggr)\]
das gesuchte Integral erhalten sollten. Wir haben auf diese Weise also eine Möglichkeit erhalten, das gesuchte Integral
zu definieren.

\begin{definition}{Integral stetiger Funktionen}
    Sei $f:[a,b]\rightarrow\mathbb{R}$ eine stetige Funktion. Dann nennen wir die Zahl $A\in\R$ mit
    \[A:=\lim_{n\rightarrow\infty}\frac{b-a}{n}\cdot \biggl(f(a)+f\Bigl(a+\frac{b-a}{n}\Bigr)+f\Bigl(a+2\frac{b-a}{n}\Bigr)+\dots+f\Bigl(a+(n-1)\frac{b-a}{n}\Bigr)\biggr)\]
    das \textbf{Integral} von $f$ im Bereich von $a$ bis $b$ und schreiben
    \[A=\int_a^bf(x)\diff x.\]
\end{definition}

Weil ein Integral die Summe vieler Rechteckflächen ist, soll das Integralzeichen an ein lang gezogenes \enquote{S} für 
\enquote{Summe} erinnern. Die Berechnung solcher Rechteckflächen ist aber mit einem solchen Aufwand verbunden, dass
wir im nächsten Abschnitt sofort beginnen werden, eine bessere Methode zur Berechnung von Integralen zu entwickeln.

\begin{advanced}{Formale Definition des Riemann-Integrals}
    Die Definition von Integralen, die wir hier verwendet haben, entspricht nicht ganz der Definition von 
    Riemann-Integralen, die in der Mathematik normalerweise verwendet wird. Integrale lassen sich auch für
    nicht-stetige Funktionen definieren, allerdings würde das mit unserer Definition zu Problemen führen, die wir
    im weiterführenden Wissen auf Seite \pageref{riemannintegral-richtig} erläutern. 
    
    Dort definieren wir außerdem Riemann-Integrale so, wie
    sie eigentlich definiert werden (dies ist nicht viel schwieriger als unsere Definition, aber ein wenig aufwendiger). Mit diesem neuen Begriff kannst du dann aber auch einige nicht-stetige Funktionen integrieren.
\end{advanced}
\begin{nutshell}{Das Riemann-Integral}
    \parpic[r]{
        \begin{tikzpicture}[scale=0.8]
            \begin{axis}[
            defgrid, y=0.9cm, x=0.9cm, ymin=-0.5, ymax=4.2, xmin=0, xmax=4, xtick={1,4}, xticklabels={$a$,$b$}, ytick={1,...,4}
            ]
                \addplot[name path=poly, domain=0:4, violet] {0.2*x^2+1};
                \pgfplotsinvokeforeach {1,2,3}{
                    \filldraw[draw=violet,fill=violet!20, opacity=0.5] (#1,0) -- (#1,0.2*#1*#1+1) -- (#1 + 1, 0.2*#1*#1+1) -- (#1 + 1, 0) -- cycle;
                }
                \draw[latex-latex,very thick] (1,3.9) -- node[above] {$n$ Rechtecke} (4,3.9);
                \draw[latex-latex] (2,-0.1) -- node[below] {\small $\frac{b-a}{n}$} (3,-0.1);
            \end{axis}
        \end{tikzpicture}
    }
    Integrale lassen sich näherungsweise berechnen, indem die Fläche, die berechnet werden soll, in Rechtecke aufgeteilt 
    wird. Je schmaler die Rechtecke sind, desto besser entspricht das Ergebnis dem tatsächlichen Integral.

    \picskip{4}
    Für stetige Funktionen $f$ können wir das Integral 
    \[\int_a^bf(x)\diff x\] 
    durch den Grenzwert
    \[\lim_{n\rightarrow\infty}\frac{b-a}{n}\cdot \biggl(f(a)+f\Bigl(a+\frac{b-a}{n}\Bigr)+\dots+f\Bigl(a+(n-1)\frac{b-a}{n}\Bigr)\biggr)\]
    beschreiben. Diese Summe beschreibt formal die Fläche zwischen einem Funk\-tions\-graphen und der $x$-Achse (wobei 
    Flächen unterhalb der $x$-Achse weiterhin negativ gewichtet werden).
\end{nutshell}
\end{document}